<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Setting up an OpenGL project using Apple Xcode</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head><body><div class="book" title="Setting up an OpenGL project using Apple Xcode"><div class="titlepage"><div><div><h1 class="title"><a id="OpenGL-In-Xcode"/>Setting up an OpenGL project using Apple Xcode</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Andrew</span> <span class="othername">Hoss</span> <span class="surname">Butcher</span></h3><span class="contrib">
	  Author
	</span> <code class="email">&lt;<a class="email" href="mailto:abutcher@afrolegs.com">abutcher@afrolegs.com</a>&gt;</code></div><div class="author"><h3 class="author"><span class="firstname">Tim</span> <span class="othername">Shaggy</span> <span class="surname">Bielawa</span></h3><span class="contrib">
	  Transformation to DocBook
	</span> <code class="email">&lt;<a class="email" href="mailto:timbielawa@gmail.com">timbielawa@gmail.com</a>&gt;</code></div></div></div></div><hr/></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="chapter"><a href="#Xcode-4-2-5">1. Xcode 4.2.5</a></span></dt><dd><dl><dt><span class="section"><a href="#Downloading-4-2-5">Downloading Xcode</a></span></dt><dt><span class="section"><a href="#Create-The-Project-4-2-5">Creating the Project</a></span></dt><dt><span class="section"><a href="#Adding-Frameworks-4-2-5">Adding Required Frameworks</a></span></dt><dt><span class="section"><a href="#Testing-out-some-code-4-2-5">Testing Out Some Code</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Legacy">2. Legacy Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#Downloading">Downloading Xcode</a></span></dt><dt><span class="section"><a href="#Create-The-Project">Creating the Project</a></span></dt><dt><span class="section"><a href="#Adding-Frameworks">Adding Required Frameworks</a></span></dt><dt><span class="section"><a href="#Fixing-Library-Paths">Fixing the Library Paths</a></span></dt></dl></dd></dl></div><div class="chapter" title="Chapter 1. Xcode 4.2.5"><div class="titlepage"><div><div><h2 class="title"><a id="Xcode-4-2-5"/>Chapter 1. Xcode 4.2.5</h2></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="section"><a href="#Downloading-4-2-5">Downloading Xcode</a></span></dt><dt><span class="section"><a href="#Create-The-Project-4-2-5">Creating the Project</a></span></dt><dt><span class="section"><a href="#Adding-Frameworks-4-2-5">Adding Required Frameworks</a></span></dt><dt><span class="section"><a href="#Testing-out-some-code-4-2-5">Testing Out Some Code</a></span></dt></dl></div><div class="section" title="Downloading Xcode"><div class="titlepage"><div><div><h2 class="title"><a id="Downloading-4-2-5"/>Downloading Xcode</h2></div></div></div><p>
	Derp.
      </p></div><div class="section" title="Creating the Project"><div class="titlepage"><div><div><h2 class="title"><a id="Create-The-Project-4-2-5"/>Creating the Project</h2></div></div></div><p>
	Fire up <span class="command"><strong>Xcode</strong></span>, 
	<span class="guimenu">Hard Disk</span> → <span class="guimenuitem">Applications</span> → <span class="guimenuitem">Xcode</span>
      </p><p>
	Create a new project
      </p><div class="mediaobject"><img src="images/4-2-5/step1.png"/></div><p>
	Under Application choose Command Line Tool and name your project.
      </p><div class="mediaobject"><img src="images/4-2-5/step2.png"/></div><div class="mediaobject"><img src="images/4-2-5/step3.png"/></div><p>
	This will give you a project set up as a blank slate for you
	to work with:
      </p><div class="mediaobject"><img src="images/4-2-5/step4.png"/></div></div><div class="section" title="Adding Required Frameworks"><div class="titlepage"><div><div><h2 class="title"><a id="Adding-Frameworks-4-2-5"/>Adding Required Frameworks</h2></div></div></div><p>
	Now that we have a blank project, we need to add targets for the
	GLUT, OpenGL, and Cocoa frameworks.  This includes all of the
	libraries necessary for building our project.
      </p><p>
	Select the project name in the directory shown on the left, this
	will show Project Targets in the main workspace.
      </p><div class="mediaobject"><img src="images/4-2-5/step5.png"/></div><p>
	Select the dropdown item for Link Binary With Libraries and
	click the + icon to add a framework.
      </p><div class="mediaobject"><img src="images/4-2-5/step6.png"/></div><p>
	Repeat this process for the GLUT and OpenGL frameworks.
    </p><div class="mediaobject"><img src="images/4-2-5/step7.png"/></div></div><div class="section" title="Testing Out Some Code"><div class="titlepage"><div><div><h2 class="title"><a id="Testing-out-some-code-4-2-5"/>Testing Out Some Code</h2></div></div></div><p>
      Paste the following into your <code class="filename">main.cpp</code>
      file, replacing the original contents:
    </p><pre class="screen">#ifdef WIN32
#include &lt;windows.h&gt;
#endif

#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;
#include &lt;fstream&gt;

#ifdef __APPLE__
#include &lt;GLUT/glut.h&gt;
#include &lt;OpenGL/gl.h&gt;
#include &lt;OpenGL/glu.h&gt;
#else
#include &lt;GL/glut.h&gt;
#include &lt;GL/glu.h&gt;
#include &lt;GL/gl.h&gt;
#endif

#include "hw5.h"

using namespace std;

#define MIN_LINEAR 0
#define MIN_NEAREST 1
#define MAG_LINEAR 2
#define MAG_NEAREST 3
#define S_REPEAT 4
#define S_CLAMP 5
#define T_REPEAT 6
#define T_CLAMP 7
#define ENV_MODULATE 8
#define ENV_REPLACE 9

static int minFilter = GL_LINEAR;
static int magFilter = GL_LINEAR;
static int wrapS = GL_REPEAT;
static int wrapT = GL_REPEAT;
static int envMode = GL_MODULATE;

void menuCallback(int);
void setCamera(void);
void drawScene(void);

static int win = 0;
static GLfloat whiteLight[3] = {1.0f, 1.0f, 1.0f};
static GLfloat greenLight[3] = {0.0f, 1.0f, 0.0f};
static GLfloat lightPosition[4] = {0.0f, 0.0f, 0.0f, 1.0f};
static GLuint teaTex;

void loadTextures()
{
	generate_texture();
	
	glGenTextures(2, &amp;teaTex);
	glBindTexture(GL_TEXTURE_2D, teaTex);
	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, magFilter);
	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, minFilter);
	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, wrapS);
	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, wrapT);
	glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, envMode);
	glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, texture_width, texture_height, 0, GL_RGB, GL_UNSIGNED_BYTE, texture_image);
}

void display()
{
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
	
	glPushMatrix();
	glTranslatef(0.0f, 10.0f, 0.0f);
	glLightfv(GL_LIGHT0, GL_POSITION, lightPosition);
	glPopMatrix();
	
	setCamera();
	
	drawScene();
	
	glutSwapBuffers();
}

void drawScene()
{
	// Draw Teapot
	glPushMatrix();
	//glBindTexture(GL_TEXTURE_2D, teaTex);
	glMaterialfv(GL_FRONT, GL_DIFFUSE, greenLight);
	glMaterialfv(GL_FRONT, GL_SPECULAR, whiteLight);
	glMaterialf(GL_FRONT, GL_SHININESS, 25.0);
	glTranslatef(0.0f, 0.5f, 0.0f);
	glutSolidTeapot(1.0f);
	glPopMatrix();

	// Draw Floor
	glPushMatrix();
	//glBindTexture(GL_TEXTURE_2D, teaTex);
	glMaterialfv(GL_FRONT, GL_DIFFUSE, whiteLight);
	glMaterialfv(GL_FRONT, GL_SPECULAR, whiteLight);
	glMaterialf(GL_FRONT, GL_SHININESS, 25.0);
	glBegin(GL_QUADS);
	glNormal3f(0.0f, 1.0f, 0.0f);
	glTexCoord2f(0.0f, 0.0f); glVertex3f(2.0f, 0.0f, 2.0f);
	glTexCoord2f(0.0f, 2.0f); glVertex3f(2.0f, 0.0f, -2.0f);
	glTexCoord2f(2.0f, 2.0f); glVertex3f(-2.0f, 0.0f, -2.0f);
	glTexCoord2f(2.0f, 0.0f); glVertex3f(-2.0f, 0.0f, 2.0f);
	glEnd();
	glPopMatrix();
}

void idle()
{
	glutPostRedisplay();
}

void setCamera()
{	
  //	gluLookAt(0.0f, 0.75f, 2.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, -1.0f);
  glTranslatef(0.0f,-0.75f, -2.0f);
  glRotatef(0.0f, 0.0f, 1.0f, 0.0f);
}

void makeMenu()
{
	int menu, min, mag, sDir, tDir, env;
	
	min = glutCreateMenu(menuCallback);
	glutAddMenuEntry("linear", MIN_LINEAR);
	glutAddMenuEntry("nearest", MIN_NEAREST);
	
	mag = glutCreateMenu(menuCallback);
	glutAddMenuEntry("linear", MAG_LINEAR);
	glutAddMenuEntry("nearest", MAG_NEAREST);

	sDir = glutCreateMenu(menuCallback);
	glutAddMenuEntry("repeat", S_REPEAT);
	glutAddMenuEntry("clamp", S_CLAMP);
	
	tDir = glutCreateMenu(menuCallback);
	glutAddMenuEntry("repeat", T_REPEAT);
	glutAddMenuEntry("clamp", T_CLAMP);
	
	env = glutCreateMenu(menuCallback);
	glutAddMenuEntry("modulate", ENV_MODULATE);
	glutAddMenuEntry("replace", ENV_REPLACE);
	
	menu = glutCreateMenu(menuCallback);
	glutAddSubMenu("texture min filter", min);
	glutAddSubMenu("texture mag filter", mag);
	glutAddSubMenu("wrap s direction", sDir);
	glutAddSubMenu("wrap t direction", tDir);
	glutAddSubMenu("texture env mode", env);
	glutAttachMenu(GLUT_RIGHT_BUTTON);	
}

void menuCallback(int option)
{
		switch (option) {
			case MIN_LINEAR:
				minFilter = GL_LINEAR;
				break;
			case MIN_NEAREST:
				minFilter = GL_NEAREST;
				break;
			case MAG_LINEAR:
				magFilter = GL_LINEAR;
				break;
			case MAG_NEAREST:
				magFilter = GL_NEAREST;
				break;
			case S_REPEAT:
				wrapS = GL_REPEAT;
				break;
			case S_CLAMP:
				wrapS = GL_CLAMP;
				break;
			case T_REPEAT:
				wrapT = GL_REPEAT;
				break;
			case T_CLAMP:
				wrapT = GL_CLAMP;
				break;
			case ENV_MODULATE:
				envMode = GL_MODULATE;
				break;
			case ENV_REPLACE:
				envMode = GL_REPLACE;
				break;
			default:
				break;
		}
	
	glDeleteTextures(1, &amp;teaTex); // De-allocate current texture
	loadTextures(); // Re-load texture
	glutPostRedisplay(); 
}

void CreateGlutWindow()
{
	glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);
	glutInitWindowPosition (10, 10);
	glutInitWindowSize (512, 512);
	win = glutCreateWindow ("Butcher, Andrew");
}

void CreateGlutCallbacks()
{
	glutDisplayFunc(display);
	glutIdleFunc(idle);
}

void InitOpenGL()
{	
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	gluPerspective(90.0, 1.0, 0.1, 100);
	glMatrixMode(GL_MODELVIEW);

	glEnable(GL_DEPTH_TEST);
	glEnable(GL_TEXTURE_2D);
	loadTextures();
	
	glEnable(GL_NORMALIZE);
	glShadeModel(GL_SMOOTH);
	glEnable(GL_LIGHTING);
	glLightfv(GL_LIGHT0, GL_DIFFUSE, whiteLight);
	glLightfv(GL_LIGHT0, GL_SPECULAR, whiteLight);
	glEnable(GL_LIGHT0);

	glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
}

void ExitGlut()
{
	glutDestroyWindow(win);
	exit(0);
}

int main (int argc, char **argv)
{
	glutInit(&amp;argc, argv); 
	CreateGlutWindow();
	CreateGlutCallbacks();
	InitOpenGL();
	
	makeMenu();
	
	glutMainLoop();
	
	ExitGlut();
	return 0;		
}
</pre><p>
      Create a new header file in the same directory titled
      <code class="filename">hw5.h</code> and paste the following:
    </p><pre class="screen">
const int texture_width = 256;
const int texture_height = 256;
GLubyte texture_image[256][256][3];

void generate_texture()
{
   for(int i=0; i&lt;texture_width; i++)
   for(int j=0; j&lt;texture_width; j++)
   {
      texture_image[i][j][0] = 255;
      texture_image[i][j][1] = 255*(i &amp; 0x04);
      texture_image[i][j][2] = 255*(j &amp; 0x04);
   }
}

</pre><p>
      Give it a Run and you should be presented with a fancy teapot:
    </p><div class="mediaobject"><img src="images/4-2-5/teapot.png"/></div></div></div><div class="chapter" title="Chapter 2. Legacy Guide"><div class="titlepage"><div><div><h2 class="title"><a id="Legacy"/>Chapter 2. Legacy Guide</h2></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="section"><a href="#Downloading">Downloading Xcode</a></span></dt><dt><span class="section"><a href="#Create-The-Project">Creating the Project</a></span></dt><dt><span class="section"><a href="#Adding-Frameworks">Adding Required Frameworks</a></span></dt><dt><span class="section"><a href="#Fixing-Library-Paths">Fixing the Library Paths</a></span></dt></dl></div><div class="section" title="Downloading Xcode"><div class="titlepage"><div><div><h2 class="title"><a id="Downloading"/>Downloading Xcode</h2></div></div></div><p>
      First, install Xcode using your OSX disc or download it from
      <a class="ulink" href="http://developer.apple.com/TOOLS/Xcode/">Apple's
      Development site</a>.<sup>[<a id="id1168376199095" href="#ftn.id1168376199095" class="footnote">1</a>]</sup>
      Watch out, it's about a 700MB ISO download. You might want to
      burn it to disk and save it when you're done.
    </p></div><div class="section" title="Creating the Project"><div class="titlepage"><div><div><h2 class="title"><a id="Create-The-Project"/>Creating the Project</h2></div></div></div><p>
      Fire up <span class="command"><strong>Xcode</strong></span>,
      <span class="guimenu">Hard disk</span> → <span class="guimenuitem">Developer</span> → <span class="guimenuitem">Applications</span> → <span class="guimenuitem">Xcode</span>
    </p><p>
      Create a new project
    </p><div class="mediaobject"><img src="images/legacy/step1.png"/></div><p>
      Under Command Line Utility, choose C++ Tool and select the
      directory in which you'll want to store your project.
    </p><div class="mediaobject"><img src="images/legacy/step2.png"/></div><p>
      This will give you a project set up as a blank slate for you
      to work with:
    </p><div class="mediaobject"><img src="images/legacy/step3.png"/></div></div><div class="section" title="Adding Required Frameworks"><div class="titlepage"><div><div><h2 class="title"><a id="Adding-Frameworks"/>Adding Required Frameworks</h2></div></div></div><p>
      Now that we have a blank project, we need to add targets for
      the GLUT, OpenGL, and Cocoa frameworks.  This includes all
      of the libraries necessary for building our project.
    </p><p>
      CTRL+CLICK (Or right click) the project name in the directory
      shown on the right, and click 
      <span class="guimenu">Add</span> → <span class="guimenuitem">Existing Frameworks...</span>
    </p><div class="mediaobject"><img src="images/legacy/step4.png"/></div><p>
      In the list shown, select Cocoa Framework and then click add
      and then add once more.
    </p><div class="mediaobject"><img src="images/legacy/step5.png"/></div><p>
      Repeat this process for the GLUT and OpenGL frameworks.
    </p></div><div class="section" title="Fixing the Library Paths"><div class="titlepage"><div><div><h2 class="title"><a id="Fixing-Library-Paths"/>Fixing the Library Paths</h2></div></div></div><p>
      Once you have added all of the relevant frameworks, you're ready
      to inflate your <code class="filename">main.cpp</code> located in the
      project.  Simply copy and paste the code from McGraw's original
      .cpp file (<a class="ulink" href="http://csee.wvu.edu/~tmcgraw/cs470fall2009/hw1-2009.cpp">http://csee.wvu.edu/~tmcgraw/cs470fall2009/hw1-2009.cpp</a>)
      into <code class="filename">main.cpp</code>.
    </p><div class="mediaobject"><img src="images/legacy/step6.png"/></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
	We're <span class="emphasis"><em>NOT</em></span> ready to build just yet.  The
	library locations for GLUT and OpenGL are structured slightly
	different on Mac which means we'll have to rename the header
	#include's within <code class="filename">main.cpp</code> to the
	following.
      </p></div><pre class="programlisting">
      
#include &lt;GLUT/glut.h&gt;
#include &lt;OpenGL/gl.h&gt;
#include &lt;OpenGL/glu.h&gt;
      
    </pre><p>
      <span class="inlinemediaobject"><img src="images/legacy/build-and-go.png"/></span>
      Now, we're ready to build the project. Simply click "Build and
      Go," making sure to save and you're done!
    </p><div class="mediaobject"><img src="images/legacy/step7.png"/></div></div><div class="footnotes"><br/><hr/><div class="footnote"><p><sup>[<a id="ftn.id1168376199095" href="#id1168376199095" class="para">1</a>] </sup><a class="ulink" href="http://developer.apple.com/TOOLS/Xcode/">http://developer.apple.com/TOOLS/Xcode/</a></p></div></div></div></div></body></html>
